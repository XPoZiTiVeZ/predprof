{{ define "title" }}Вход в аккаунт{{ end }}

{{ define "main" }}
<div class="login">
    <form id="formLogin">
        <h2>Вход</h2>
        <label for="inputEmail">Почта</label>
        <input id="inputEmail" type="email" name="email" required>
        <label for="inputPassword">Пароль</label>
        <input id="inputPassword" type="password" name="password" required>
        <button type="submit">Войти</button>
    </form>
</div>
{{ end }}

{{ define "script" }}
<script>
    const form = document.getElementById('formLogin');
    form.addEventListener('submit', async(e) => {
        e.preventDefault();

        const email     = document.getElementById('inputEmail').value;
        const password  = document.getElementById('inputPassword').value;

        const response = await fetch('/login', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                "email":     email,
                "password":  password,
            })
        });

        if (response.ok) {
            alert('Успешная вход!');
            window.location.href = '/';
        } else {
            alert('Неуспешная вход!');
        }
    });
</script>
{{ end }}